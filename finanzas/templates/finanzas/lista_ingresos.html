{% extends "finanzas/base.html" %}

{% block contenido %}
<div class="row justify-content-center text-center">
    <div class="col-md-4">
        <form method="get" class="mb-3">
            <div class="row g-3 align-items-end">
                <div class="col">
                    <label for="desde" class="form-label">Desde:</label>
                    <input type="date" id="desde" name="desde" class="form-control" value="{{ fecha_desde }}">
                </div>
                <div class="col">
                    <label for="hasta" class="form-label">Hasta:</label>
                    <input type="date" id="hasta" name="hasta" class="form-control" value="{{ fecha_hasta }}">
                </div>
            </div>

            <div class="mt-3">
                <button type="submit" class="btn btn-secondary">Filtrar ingresos</button>
            </div>
        </form>
    </div>
</div>

<a href="{% url 'añadir_ingreso' %}" class="btn btn-success mb-3">Añadir ingreso</a>

<table class="table table-striped table-bordered table-hover table-sm align-middle text-center">
    <thead class="table-dark">
        <tr>
            <th style="width: 15%">Fecha</th>
            <th style="width: 15%">Cantidad</th>
            <th>Concepto</th>
            <th style="width: 10%">Opciones</th>
        </tr>
    </thead>
    <tbody>
        {% for ingreso in ingresos %}
        <tr>
            <td>{{ ingreso.fecha|date:"d/m/Y" }}</td>
            <td class="text-success">+{{ ingreso.cantidad }}€</td>
            <td>{{ ingreso.concepto }}</td>
            <td class="text-center" >
                <a href="{% url 'editar_ingreso' ingreso.pk %}" class="btn btn-sm btn-outline-primary" title="Editar">
                    <i class="bi bi-pencil"></i>
                </a>
                <a href="{% url 'eliminar_ingreso' ingreso.pk %}" class="btn btn-sm btn-outline-danger" title="Eliminar"
                   onclick="return confirm('¿Estás seguro de que quieres eliminar este ingreso?')">
                    <i class="bi bi-trash"></i>
                </a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4" class="text-center">No hay ingresos registrados.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
