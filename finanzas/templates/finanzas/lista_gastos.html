{% extends "finanzas/base.html" %}

{% block contenido %}
<div class="row justify-content-center text-center">
    <div class="col-md-4">
        <form method="get" class="mb-3">
            <div class="d-flex flex-wrap flex-md-nowrap justify-content-center align-items-end gap-2">
                <div class="form-group">
                    <label for="desde" class="form-label">Desde:</label>
                    <input type="date" id="desde" name="desde" class="form-control" value="{{ fecha_desde }}">
                </div>
                <div class="form-group">
                    <label for="hasta" class="form-label">Hasta:</label>
                    <input type="date" id="hasta" name="hasta" class="form-control" value="{{ fecha_hasta }}">
                </div>
            </div>

            <div class="mt-3">
                <button type="submit" class="btn btn-secondary">Filtrar gastos</button>
            </div>
        </form>
    </div>
</div>

<a href="{% url 'añadir_gasto' %}" class="btn btn-danger mb-3">Añadir gasto</a>

<table class="table table-striped table-bordered table-hover table-sm align-middle text-center">
    <thead class="table-dark">
        <tr>
            <th style="width: 15%">Fecha</th>
            <th style="width: 15%">Cantidad</th>
            <th>Concepto</th>
            <th style="width: 10%">Opciones</th>
        </tr>
    </thead>
    <tbody>
        {% for gasto in gastos %}
        <tr>
            <td>{{ gasto.fecha|date:"d/m/Y" }}</td>
            <td class="text-danger">-{{ gasto.cantidad }}€</td>
            <td>{{ gasto.concepto }}</td>
            <td class="text-center" >
                <a href="{% url 'editar_gasto' gasto.pk %}" class="btn btn-sm btn-outline-primary" title="Editar">
                    <i class="bi bi-pencil"></i>
                </a>
                <a href="{% url 'eliminar_gasto' gasto.pk %}" class="btn btn-sm btn-outline-danger" title="Eliminar"
                   onclick="return confirm('¿Estás seguro de que quieres eliminar este gasto?')">
                    <i class="bi bi-trash"></i>
                </a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4" class="text-center">No hay gastos registrados.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
